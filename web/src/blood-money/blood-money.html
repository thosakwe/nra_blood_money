<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../blood-list/blood-list.html">

<dom-module id="blood-money">
    <template>
        <style>
            :host {
                @apply(--layout);
                @apply(--layout-fullbleed);
                @apply(--layout-vertical);
            }

            blood-list {
                @apply(--layout-flex);
            }
        </style>

        <iron-ajax last-response="{{politicians}}" handle-as="json" url="/api/politicians" auto></iron-ajax>
        <app-indexeddb-mirror
                key="politicians"
                data="{{politicians}}"
                persisted-data="{{persistedPoliticians}}">
        </app-indexeddb-mirror>

        <blood-list politicians="[[politicians]]"></blood-list>
    </template>

    <script>
      /**
       * @customElement
       * @polymer
       */
      class BloodMoney extends Polymer.Element {
        static get is() {
          return 'blood-money';
        }
      }

      window.customElements.define(BloodMoney.is, BloodMoney);
    </script>
</dom-module>
